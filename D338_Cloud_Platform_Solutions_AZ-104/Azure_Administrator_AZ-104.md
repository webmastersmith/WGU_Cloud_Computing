# D338 Cloud Platform Solutions Azure Administrator AZ-104

## Tips

- **Azure for Students Starter**: access to free tier items only. cannot access non-free services.
- **Azure for Students**: $100 credit + free tier services. access to non-free services.
  - [Student portal pricing](https://www.microsoftazuresponsorships.com/Balance) // must be signed in.
- **First Impressions**: the OA is focused on network infrastructure terminology and function. The AZ-104 certification test leans more toward building infrastructure with CLI & powershell,. While both are essential, it makes learning an already difficult test, more difficult.
- **Tutorials, Advice**
  - <https://www.reddit.com/r/WGU/comments/18i1uv8/wgu_d338_its_super_easy/>
  - <https://www.reddit.com/r/AzureCertification/comments/1colul0/passed_az104_my_experience_with_this_exam/>
  - <https://www.linkedin.com/pulse/passing-az-104-exam-everything-you-need-know-neeraj-kumar/>
  - <https://www.reddit.com/r/AzureCertification/comments/1crlfs5/passed_az104/>
    - Storage, Entra, and networking areas had tricky questions.
  - <https://www.reddit.com/r/AzureCertification/comments/1ctkwt0/passed_az_104/>
  - Search for each topic on Microsoft documentation and Microsoft learn to help study each area of the AZ-104 exam. Use search like this ms **docs + "Study topic"**.
  - <https://www.thomasmaurer.ch/2020/03/az-104-study-guide-azure-administrator/>
- **Videos**
  - <https://www.youtube.com/playlist?list=PLlVtbbG169nGlGPWs9xaLKT1KfwqREHbs>
  - <https://wgu.udemy.com/course/az-104-microsoft-azure-administrator-lab-exam-prep/>
  - <https://www.linkedin.com/learning/paths/prepare-for-the-microsoft-azure-administrator-az-104-certification-exam>
- **Flashcards**
  - <https://quizlet.com/791527803/az-104-flash-cards/?funnelUUID=f595251a-598c-4eff-8213-e64cb8286eb8>
  - <https://www.brainscape.com/subjects/az-104>
- **Notes**
  - <https://github.com/mischavandenburg/az-104-azure-administrator> // includes Anki cards.
- **Book**
  - <https://lrps.wgu.edu/provision/277282392> // must be signed in.
- **Course Chatter**
  - Make sure to know the difference between RBAC and Azure AD roles, and how they are used.
  - Know all the different "types" of things like AD license types, Load Balancer types, storage account types, etc... and what can/cannot be done with them.
  - Know about how policies and roles work together.
  - Know about the different types of backup, and how it's used. Know about containers and networking, and the different ways monitoring is done and used.
  - **Joshua S**
    - AZ-104. Prep for the actual certification and gauges knowledge on how-to and CLI commands, Powershell scripting etc.
    - The OA however will not, so spending time in a lab going through the how-to's and pouring over script and .csv examples in the book won't get me past the WGU exam but will come handy for the Microsoft Certification. Without a doubt, the Pluralsight videos and practice exams did very little to prepare for the OA.
    - have come to the conclusion that the OA is taken straight from the book and video links nor the AZ-104 practice exams in Pluralsight.
    - flashcards for memorization will help with Ports, Subscription levels, and specific concepts like Cloud vs On-Prem.
- **Microsoft**
  - 700 of 1000 to pass.
  - Hands-on experience is crucial in preparing for the AZ-104 exam.
  - [practice questions](https://learn.microsoft.com/en-us/credentials/certifications/exams/az-104/practice/assessment?assessment-type=practice&assessmentId=21&source=docs)
  - [Azure All Services](https://azure.microsoft.com/en-us/products/)
  - [AZ-104 Training](https://learn.microsoft.com/en-us/training/courses/az-104t00#course-syllabus)
  - [AZ-104 Overview](https://learn.microsoft.com/en-us/credentials/certifications/azure-administrator/?practice-assessment-type=certification)
  - [AZ-104 Study Guide](https://learn.microsoft.com/en-us/credentials/certifications/resources/study-guides/az-104)
  - [AZ-104 Labs](https://microsoftlearning.github.io/AZ-104-MicrosoftAzureAdministrator/)
  - [AZ-104 Exam Prep Videos](https://learn.microsoft.com/en-us/shows/exam-readiness-zone/preparing-for-az-104-manage-azure-identities-and-governance-1-of-5)
- **Exam Purpose**:
  - <https://learn.microsoft.com/en-us/credentials/certifications/resources/study-guides/az-104#skills-measured-as-of-october-26-2023>
  - **Weights**
    - Manage Azure identities and governance (15-20%)
    - Implement and manage storage (15-20%)
    - Deploy and manage Azure compute resources (20-25%)
    - Configure and manage virtual networking (25-30%)
    - Monitor and back up Azure resources (10-15%)

## Azure Cloud Shell

- **Cloud Shell**
  - browser based(access anywhere) cli for bash, powershell.
  - cloud storage provides
  - upload scripts and store on cloud for access anywhere.
  - **Rules**
    - session last **20 minutes**. Not for long running scripts, session will **end without warning**.
    - no 'sudo' or admin permission changes.
    - no non-supported tool installs.
    - no multiple region storage.
    - no multiple sessions.

## Azure Resource Manager

- **Azure Resource Manager**
  - deploy, manage, monitor, security, auditing, tagging, authentication (vm, database, third-party...) as a group.
  - **Benefits**
    - reusable templates allow easy deployment.
    - handle resources as a group instead of individually.
    - tag resources.
  - ![resource management](img/resource_management.PNG)
- **declarative syntax**
  - declarative programming. **what you want, not how to do it**.
  - Syntax that lets you state "Here is what I intend to create" without having to write the sequence of programming commands to create it. The Resource Manager template is an example of declarative syntax. In the file, you define the properties for the infrastructure to deploy to Azure.
- **resource**
  - manageable item through Azure. VMs, web app, database...
  - can only **belong** to **one resource group**.
- **resource group**
  - container that holds related resources(logical collection).
  - **Rules**
    - **each resource can only exist in one resource group**.
    - resource groups **cannot** be **nested**.
    - resource group **cannot** be **renamed**.
    - can have many different type(services) and **regions**.
    - all resources share the same lifecycle. e.g. you deploy, update, delete them together.
    - a resource can interact with resources in other resource groups.
    - **RBAC(role based access control)** can be **assigned** to resource groups.
    - because a resource group contains metadata about resources, for **compliance reasons(government, sovereign states)**, you must provide a **location** of resource group.
    - when **moving resources** from one group to another, you **can't add, update, or delete resources** in the resource groups until the move completes. The 'services' will still be available.

```powershell
# remove resource group.
Remove-AzResourceGroup -Name "YourResourceGroupName"
```

- **resource limits**
  - track usage against limits and plan for future needs.
  - limits shown are for you **subscription**.
  - all resources have 'maximum' limits threshold that you can't increase.
  - ![resource limits](img/resource_limits.PNG)
- **Resource Manager locks**
  - prevent accidental deletion of resources, even if you have delete permissions.
  - only the **Owner** and **User Access Administrator** roles can create or delete management locks.
  - child resources inherit **Locks**.
  - **Read-Only Lock**: prevent change.
  - **Delete Lock**: prevent deletion.
- **resource provider**
  - service that supplies resources you can deploy and manage through the 'Resource Manager'.
  - e.g. Microsoft.Compute, Microsoft.Storage, Microsoft.KeyVault, Microsoft.Web...
  - resource type is in the format: `{resource-provider}/{resource-type}`. For example, the key vault type is `Microsoft.KeyVault/vaults`.
- **template**
  - JSON(javascript object notation) file that defines one or more resources, to **deploy to a resource group**.

## Configure user and group accounts (Entra ID)

- **user account**
  - anyone who wants to access an Azure resource, must have an Azure user account.
  - **Entra ID cloud identity user accounts can be added through**:
    - Azure portal, Microsoft 365 Admin Center, Microsoft Intune admin console, and the Azure CLI.
- **Entra ID three types of user accounts**
  - **Cloud**: **cloud identity** accounts.
    - Cloud identities have profile information such as job title and office location.
  - **Hybrid**: when user has on-prem AD account (**_directory-synchronized identity_**) synchronized w/ Entra ID via Entra Connect.
  - **Guest**: outside of Azure. e.g. external vendor or contractor need access to your Azure resources.
- **who can create/delete users**
  - only global admins can create/delete users.
- **Security/Microsoft 365 group accounts**
  - two types of group accounts:
    - **Security groups**: manage users and computer/app access through security policy.
      - set permissions for all group members at same time.
      - managed only by **Microsoft Entra Administrator**.
    - **Microsoft 365 groups**: group access to apps. e.g. mailbox, calendar, files, sharepoint...
      - allow access to normal users and guest accounts.
- **administrative units**
  - **restricts administrative scope**. admins can have greater privileges than others depending on the scope of their responsibilities.
  - ![administrative units](img/administrative_units.PNG)

## Azure Subscriptions and Cost Management

- **Subscriptions**
  - manage cost for organizations. help you organize access to Azure cloud service resources, and help you control how resource usage is reported, billed, and paid.
  - Azure Subscription is a logical unit of Azure services that's linked to an Azure account(Microsoft Entra **tenant**).
  - **Rules**
    - all Azure cloud services will belong to a subscription. billing is done per subscription.
    - Azure account can have multiple subscriptions.
    - a subscription can be linked to multiple Azure accounts.
  - ![subscription](img/subscription.PNG)
- **regions**
  - one or more data centers networked together.
  - preserve data residency(keep data inside the region).
  - offer compliance and resiliency depending on customer needs.
- **subscription types**
  - **Free**: 30 day free.
  - **Pay-As-You-Go**: charges you monthly for the services you used in that billing period.
  - **Enterprise Agreement**: buy cloud services and software licenses under one agreement.
  - **Student**: monetary credit that can be used within the first 12 months.
- **Cost Management**
  - you pay only for what you use. Shows the usage-based costs consumed by Azure services and third-party Marketplace offerings.
  - Predictive analytics are available.
  - Azure management groups, budgets, and recommendations to show how your expenses are organized and how to reduce cost.
  - Cost data can be exported.
- **Cost Budgets, Recommendations, analysis**
  - Budget: set limits to prevent overspending.
  - Recommendations: learn how to optimize and improve efficiency of idle or underutilized resources.
  - Analysis: explore where the money is going and spending trends.
  - export: data can be set to automatically export csv daily.
- **Resource Tagging**
  - tags allow sorting, searching, managing and analysis.
  - name:value
  - max 50 labels per resource/resource group.
  - tags are not inherited from resource group.
- **Cost Savings**
  - **Reservations**: pay ahead. 1-3 years. VM, Database,
  - **Azure Hybrid**: use your **_Software Assurance_** on-prem licenses(Windows Server, SQL Server...).
  - **Azure Credits**: Visual Studio Subscribers get monthly credits for development.
  - **Azure Regions**: compare region pricing.
  - **Budgets**: manage cost, prevent overspending.
  - **Pricing Calculator**: estimate usage: Compute, networking, storage, web, database.

## Azure Policy and Management Groups

- **Management Groups**
  - level of scope and control(manage access, policy and compliance) across **subscriptions**.
  - use management groups to target policies and spending budgets across **subscriptions**.
  - all subscriptions within management group inherit policy. e.g. specific region to create VMs.
  - enforce compliance rules with management groups.
  - ![management group](img/management_group.PNG)
- **Policy and Policy Definition**
  - **Policy**
    - create, assign, and manage policies to control or audit your resources.
    - enforce rules and ensure compliance with corporate standards and service level agreements.
    - **enforcement and compliance, scaling, and remediation**.
  - **Policy Definition**
    - JSON format. Express condition to evaluate and actions to perform when condition is met.
    - enforce different rules and effects over your resources, so those resources stay compliant with your IT governance standards.
  - individual resources, resource groups, subscriptions can be exempted from policy.
    - e.g. cannot deploy VM if it has an exposed public IP address.
- **Initiative Definition**
  - A **group of related policies** joined logically to accomplish a common goal is called an **Azure initiative**.
  - help you track one or more policy definition compliance state.
  - scope can be limited to certain groups.
  - e.g. similar to lego blocks, logically combine multiple policies and apply them as one.
- **Policy Compliance**
  - see what percentage of your infrastructure is compliant with policy.
  - determine the compliance state of your resources and evaluate whether they're compliant.

## Azure RBAC (Role Based Access Control) and Entra Roles

- **RBAC**
  - Azure RBAC and Microsoft Entra roles are different.
  - **RBAC**: applies policy to infrastructure(VM, DataBase, Storage...).
    - manage who can access their resources, and what actions are allowed.
    - control access to data and resources by specifying roles and access privileges for employees and business partners.
    - create role definitions and role assignments.
  - **Entra Role**: applies policy to identities(users, groups, domains).
- **Security Principal**
  - object that represents something(**Requestor**) requesting access to resource.
  - Requestors can be internal or external users, groups of users, applications and services(**_service principal_**), resources, and so on.
- **Role Definition**
  - JSON list of allowed permissions. least privilege.
  - **Owner** built-in role has the **highest level of access privilege** in Azure.
  - The system **subtracts NotActions** permissions from **Actions** permissions to determine the **_effective permissions_** for a role.
  - e.g. **reader, contributor, owner, user access administrator**.
  - **JSON**
    - **Actions**: permissions identify what actions are allowed.
    - **NotActions**: permissions specify what actions aren't allowed.
    - **DataActions**: permissions indicate how data can be changed or used.
    - **AssignableScopes**: permissions list the scopes where a role definition can be assigned
    - ![role definition](img/role_definition.PNG)
    - ![role definition2](img/role_definition2.PNG)
- **scope**
  - how many resources access is granted.
  - **_AssignableScopes_**: permissions for a role can be management groups, subscriptions, resource groups, or resources.
- **Role Assignment**
  - **assignment** attaches **role definition** to a **security principal** at a particular **scope**.
  - purpose of a role assignment is to control access.
  - Role Assignment parts:
    - **Security Principal**: **who**. something/someone(VM service, user) requesting access to resource.
    - **Role Definition**: **what**. JSON list of allowed permissions(built in: Owner, Contributor, Reader...).
    - **Scope**: **where**. how many resources granted access.
      - management group -> subscription -> resource group -> resource. Permissions in sub levels are inherited.
    - ![RBAC scope](img/rbac_scope.PNG)
    - ![Role definition](img/role_definition2.PNG)
- **Classic Subscription Administrator Role vs RBAC Role vs Entra Role**
  - **Classic Subscription Administrator**: Azure first role policy.
    - Account Administrator, Service Administrator, and Co-Administrator. Access was controlled by assigning admin roles to subscriptions.
  - **Azure RBAC**: added fine grain control and custom roles on resources(VM, DB, Storage...).
  - **Entra Administrator Role**: adds ability to manage users, groups, domains in Microsoft Entra resources(apps). Scope is defined at **_tenant_** level.
    - controls access at a higher level than RBAC.
  - ![rbac entra roles](img/rbac_entra_roles.PNG)
- **Entra and RBAC solve what Identity and Access concern of the Cloud**
  - when employees leave, lose access to resources in cloud.
  - being able to centrally control network communication, while allowing employee autonomy(create/manage VMs).
  - Entra and RBAC work together to address these concerns.
- **Entra User**
  - when a user is added, they are granted default permissions.
    - Varies by: type of user(admin, member, guest), role assignment, ownership of individual objects.
- **Entra Administrator Role**
  - create/delete/assign users.
  - you can restore deleted users within 30 days of deletion.

```powershell
# create a new user
New-MgUser
# remove user
Remove-MgUser
```

- **Entra Member Role**
  - manage their profile. considered internal to organization.
  - by default can invite guest.
- **Entra Guest Role**
  - invite someone to collaborate with organization, most restricted permissions.
- **Entra Groups**
  - apply roles to all members of group.
  - **Direct assignment**: you manually give them role assignment.
  - **Group assignment**: you assign group role.
  - **Rule-based assignment(Dynamic Assignment)**: rules based on user or device.
- **Entra B2B**
  - external team collaboration. add external collaborators as **guest users**.
  - By default, users(members) and administrators in Microsoft Entra ID can invite guest users.
  - connect multiple **internal tenants** for collaboration.
    - e.g. tenant A needs access to resource in tenant B.
  - **Why B2B**
    - instead of having to manage each external collaborator, you can set roles and they have to manage themselves.
    - you don't take the responsibility of managing, authenticating the credentials and identities of external users.
    - **federation**: Entra B2B is easier than using on-prem AD FS(federation service). To use AD FS you have to add an internet facing proxy for them to log into.
      - Good for keeping all auth local, but if your network goes down, no one can connect.
    - ![federation](img/federation.PNG)
- **Entra Connect Cloud Sync and Sync**
  - **Entra Connect Cloud Sync**
    - engine runs in cloud.
  - **Entra Connect Sync**
    - engine runs on-prem with AD. Flows one-way. Authorization is verified from the on-prem engine.
- **Entra Domain Services: Entra Connect**
  - Providing authentication when you have on-prem AD DS and apps on cloud VMs:
    - site-to-site VPN. on-prem -> cloud. = expensive.
    - replica AD DS on VM in the cloud. = expensive.
    - **Entra Connect** solves this problem:
      - Provides AD DS services: GPO w/ kerberos auth to Microsoft Entra tenant. Allows on-prem AD DS to communicate with cloud services.
      - If you don't have on-prem AD DS, Entra Connect works by providing you support to your on-prem infrastructure through a site-to-site VPN.
      - freely migrate applications that use LDAP, NTLM, or the Kerberos protocols from your on-premises infrastructure to the cloud.
- **Entra ID vs Active Directory**
  - **Entra ID**
    - Microsoft Entra ID is a cloud-based identity and access management service(PaaS). Allows employees can use to access external resources. e.g. Microsoft 365, Azure Portal...
    - SAML, WS-Federation, and OpenID Connect for authentication, and uses OAuth for authorization.
    - focused on providing **identity management** services to **web-based apps**, unlike **AD DS**, which is more focused on **on-premises apps**.
    - Entra ID users have access to a set of features that **arenâ€™t natively available in AD DS**, such as support for **multi-factor authentication, identity protection, and self-service password reset**.
      - primarily an **identity solution** for internet based(**https**) communications.
      - multi-tenant directory service.
      - provides **directory services**: stores and handles the authentication and authorization of the **users, devices, and applications**.
      - Entra is **managed** by **REST API** over https.
      - Entra ID includes **federation services**(sign-in once, authenticate to multiple services).
  - **AD(active directory)**
    - Active Directory Domain Services (AD DS or traditionally called just "Active Directory").
    - directory service that provides the methods for storing directory data, such as **user accounts and passwords**, and makes this data available to network users, administrators, and other devices and services. It runs as a service on **Windows Server**, referred to as a **domain controller**.
    - authentication: **kerberos** for identity.
    - true X.500 based structure. Uses DNS for locating resources on network.
    - OUs(organizational units) and GPOs(group policy objects) for management.
    - You can query and manage AD DS by using Lightweight Directory Access Protocol (LDAP) calls.
    - AD DS can be deployed on a virtual machine, but does not use Microsoft Entra ID.
- **Entra ID P2 over P1**
  - P2 has
    - Entra ID protection: enhanced security/monitoring user accounts.
    - Entra Privileged Identity Management: additional security levels for admins(permanent and temporary).
- **Entra Schema**
  - no definition of 'computer' class(AD has 'computer' class definition). Uses 'device' class instead.
    - lack of support of 'computer' domain, you can't manage GPOs, instead Entra provides **directory services**: stores and handles the authentication and authorization of the **users, devices, and applications**.
  - **no OU(AD organizational unit)** class. Policy scope and delegation organization is done by '**group membership**'.
- **Entra tenant**
  - [microsoft definition](https://learn.microsoft.com/en-us/microsoft-365/enterprise/subscriptions-licenses-accounts-and-tenants-for-microsoft-cloud-offerings?view=o365-worldwide#tenants)
  - [tenant](https://learn.microsoft.com/en-us/entra/identity-platform/quickstart-create-new-tenant)
  - A tenant represents an organization. It's a dedicated instance of Microsoft Entra ID that an organization or app developer receives at the beginning of a relationship with Microsoft(yourname.onmicrosoft.com).
  - An organization can have multiple Microsoft Entra instances(tenant). This allows separation.
  - An Azure subscription can have only one Microsoft Entra tenant.
  - e.g. your piece in the cloud with your name like **yourname.onmicrosoft.com** that you lease from microsoft.
    - An organization can have multiple Microsoft Entra tenants.
    - An organization can have multiple Azure subscriptions(each subscription must be associated with one, and only one, Microsoft Entra tenant).
    - A subscription can have multiple licenses.
    - Licenses can be assigned to individual user accounts.
    - RBAC(grant permissions to resources in the Azure subscription) and User accounts are stored in your Microsoft Entra tenant(yourname.onmicrosoft.com).
- **Entra SSPW (self service password reset)**
  - user can reset their password.
  - user is considered 'registered' when they setup the required amount of password resets.
  - a strong two-method authentication policy is always applied to accounts with an administrator role.
    - security-question method is not available for administrator roles.
  - **Best Practices**
    - Enable two or more of the authentication reset request methods.
    - Use the mobile app notification or code as the primary method, but also enable the email or office phone methods to support users without mobile devices.
    - The mobile phone method isn't a recommended method, because it's possible to send fraudulent SMS messages.
    - The security-question option is the least recommended method, because the answers to the security questions might be known to other people. Only use the security-question method in combination with at least one other method.
- **Entra Domain Names**
  - microsoft gives you a sub-domain: `yourName.onmicrosoft.com`
  - add your domain name. e.g. `example.com`

## Azure Storage

- **Azure Storage**
  - goals: scalable, reliable. Handle high traffic w/ data durability. Quick restore of outage.
  - All storage is encrypted at rest with SSE(storage service encryption).
- **Azure storage services: blob, disk, file, table, queue**
  - **blob (Binary Large Object)**: **unstructured**, _nonrelational_ data. Any type of binary data, typically large files(archives), video, images...
  - **disk**: **block-level** storage for persistent VM data. They are 'page-blobs' in blob storage.
  - **file**: mimics a SMB or NFS **file server**. file sharing access and management. Ensures data is **encrypted** at rest and in transit.
  - **table**: **structured NoSQL** _nonrelational_ data. e.g. key:value like mongodb.
  - **queue**: **messages** accessible from anywhere through HTTPS calls.
- **Describe storage backup tiers**
  - **hot**: online tier(immediate access), frequent access.
  - **cool**: online tier(immediate access), infrequent access. 30 day storage.
  - **cold**: online tier(immediate access), rarely accessed. 90 day storage.
  - **archive**: **offline** tier(low priority, high latency, several hours to access), rarely accessed. 180 day storage.
  - ![storage access tiers](img/storage_access_tier.PNG)
- **Blob Storage**
  - good for serving images(to browser), streaming video, distributed access, archive/recovery.
  - all blob storage must be in a container.
  - ![blob storage](img/blob_storage.PNG)
- **Blob Storage Lifecycle Management**
  - set rules to automatically move blob object into a cheaper tier(cool, cold, archive) when not accessed in a certain time period.
  - rules to delete blobs at end of lifecycle.
  - **Cost**:
    - data cost to store **decreases** as tier gets cooler.
    - data cost to access **increases** as tier gets cooler.
    - pay for transaction(all tiers).
    - data cost to transfer(replicate to another region, move out of Azure, per-gigabyte charge).
    - Hot -> cool: incurs a **write** charge for all data.
    - Cool -> Hot: incurs **read** charge for all data.
    - Hot, Cool, Cold transfer happens immediately. Archive takes time.
  - ![blob storage lifecycle](img/blob_storage_lifecycle.PNG)
- **Blob Object Replication**
  - blobs copied asynchronously.
  - complete blob object is copied(metadata, version history, blob contents).
  - blob versioning must be enabled on both source and destination, to perform replication.
  - snapshots **are not** replicated.
  - replication can only be between Hot, Cool, or Cold.
  - ![blob storage replication](img/blob_storage_replication.PNG)
- **Blob Uploads**
  - blob any data type any size.
  - **block blob**: default. block data storage. e.g. video, large text files, images, binary...
  - **page blob**: 8TB max size. optimized read/write operations. e.g. VM disk.
  - **append blob**: optimized for append data. e.g. logging.
- **Describe redundancy options**
  - backup copies in local, zone, region.
- **Describe storage account options and storage types: LRS, ZRS, GRS, RA-GRS, GZRS**
  - **LRS**: locally redundant storage. three copies of data within same **datacenter**.
  - **ZRS**: zone redundant storage. copies data across three **availability zones** within a region.
  - **GRS**: geo-redundant storage. synchronous LRS, then asynchronous LRS to secondary region.
  - **RA-GRS**: Read-access geo-redundant storage. because secondary storage data cannot be read until primary fails, this method allows you to read from secondary, with primary still working.
  - **GZRS**: geo-zone redundant storage. synchronously ZRS, then asynchronously ZRS to secondary region.
  - [learn storage](https://learn.microsoft.com/en-us/azure/storage/common/storage-redundancy)
  - ![storage reliability](img/storage_reliability.PNG)
  - ![high availability](img/04-azure-global-infra.jpg)
  - ![availability zones](img/Azure-Availability-zone-infographic.png)
- **Identify options for moving files, including AzCopy, Azure Storage Explorer, and Azure File Sync**
  - **AzCopy**: cmd line utility copy blobs or files.
  - **Azure Storage Explorer**: GUI to manage blob/file.
  - **Azure File Sync**: centralize files. **Automated bi-directional sync** from **Cloud with on-prem**. Installs on Windows Server.
- **Describe migration options, including Azure Migrate and Azure Data Box**
  - **Azure Migrate**: hub of services and tools designed to help with data migration.
  - **Azure Data Box**: send terabytes of data into and out of Azure in a quick, inexpensive, and reliable fashion. Shipped 'data box'. Basically it's a 'storage drive' with your data on it, that is shipped to you.
  - **Azure Import/Export**: same as Azure Data Box, but you supply the hard drives, Microsoft copies your data and ships to you.
- **Storage Endpoint URL**
  - each object in storage is prefixed with `YOURNAME.SERVICE.core.windows.net/myStorageName/myblob`
  - names must be **globally** unique.
  - you can map a custom endpoint: `blob.example.com`. This is done by CNAME(points to Azure) from DNS provider.
  - ![storage endpoint](img/storage_endpoint.PNG)
- **File Share and File Sync**
  - **File Share**: managed file shares in the cloud that are accessible via industry standard protocols.
  - **File Sync**: cache files and synchronize between Azure and on-prem Windows Server or cloud VM.

## Storage Security

- **Storage Access Levels**
  - **Private**: default. visible only to owner.
  - **Blob**: public read access only.
  - **Container**: public read and list(get inventory of entire container).
- **Storage Security**
  - **disk encryption**: Azure Disk Encryption. all data written encrypted by default(Azure storage encryption, 256 bit AES). decrypted automatically. transparent to users. cannot be disabled.
  - **data in transit**: Azure Client-Side Encryption, HTTPS, SMB 3.0.
  - **shared access signatures(SAS)**: data object permissions(set time period) given access by SAS.
  - **shared key**: key produces encrypted signature. passed in Authorization header.
  - **authentication**: Entra ID(user identity) and RBAC(resource permissions). prove your identity
  - **authorization**: RBAC. you have access rights to resource.
- ***
- **Shared Access Signature**
  - uniform resource identifier(URI): grants restricted access rights(set time period) to Azure Storage resources.
    - `https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B`
  - purpose: give client who normally does not have access, a URI for a specified time period, to prevent account keys exposure.
  - granular control(read, write, delete...) of resource permissions(blobs, files, queues, tables). restrict IP address, protocol used(https or http).
  - **account-level**: one or more services.
  - **service-level**: only one service.
- **Shared Keys**
  - **Customer Managed Keys**: create your own key. greater control(create, audit, rotate, delete...).
    - stored in **Azure key vault** or URI.
- **Storage Security Best Practices**
  - **data**: encrypted at rest and in transit.
  - **WAF firewall**: Web Application Firewall. Layer 7 aware. Route and filter traffic(SQL injection, XSS...). block IP address. **Application Gateway** or **Front Door**.
  - **private link**: wrap data resource in VPN and share data between services along Azure backbone instead of public internet. shields DB from outside world.
  - **restrict access to VM's**: disable RDP(remote desktop protocol) and SSH. Keep VM on private network, connect through **Azure Bastion**.
  - **Secret Keys**: Azure Key Vault. To connect services to Azure Key Vault, use **Managed Service Identities**.
  - **Production**: use separate subscription for production environment. Development policies and Production policies can be controlled.
  - **Resources**: RBAC to allow users permissions on resources.
  - **Azure Security Center**: Azure service that informs you of your security state and what can be improved.
- **Private Link**
  - data shared between services along microsoft backbone instead public internet.
  - ![private link](img/private_link.PNG)
